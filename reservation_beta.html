<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="referrer" content="no-referrer" />
  <meta name="theme-color" content="#000000">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="https://limojazz.github.io/limojazz/img/pwa_ios_limojazz_512.png">
  <link rel="manifest" href="manifest.json">
  <link href="https://fonts.googleapis.com/css2?family=Figtree:wght@400;600&display=swap" rel="stylesheet">
  <title>Quote & Reserve</title>
  <!-- Font Awesome for navbar icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <style>
    /* ==============================
       Reservation Page Styles
       ============================== */
    *, *::before, *::after {
      box-sizing: border-box;
    }
    body {
      font-family: 'Figtree', sans-serif;
      background-color: #000;
      color: #fff;
      margin: 0;
      padding: 0;
    }
	button {
	font-family: 'Figtree', sans-serif;
	}
    .container {
      box-sizing: content-box;
      max-width: 600px;
      margin: auto;
      margin-bottom: 80px;
      padding: 0 20px;
      background-color: #000;
      border-radius: 8px;
    }
    h2 {
      text-align: center;
      margin-bottom: 10px;
    }
    h3 {
      text-align: center;
      margin-bottom: 20px;
      font-weight: normal;
      font-size: 16px;
    }
    p {
      margin: 0 0 15px;
    }
    label {
      display: block;
      margin-bottom: 5px;
    }
    input, textarea {
      width: 100%;
      padding: 10px;
      padding-right: 120px;  /* extra space for in-field buttons */
      margin-bottom: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
      background-color: #555;
      color: #fff;
    }
    .input-container {
      position: relative;
      margin-bottom: 15px;
    }
    .infield-button {
      position: absolute;
      top: 59%;
      transform: translateY(-50%);
      background-color: gray;
      border: none;
      color: #fff;
      width: 30px;
      height: 30px;
      border-radius: 4px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
    }
    .btn-clear { right: 10px; }
    .btn-airport { right: 50px; }
    .btn-current { right: 90px; }
    .clear-button {
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      background: transparent;
      border: none;
      color: #fff;
      cursor: pointer;
      font-size: 16px;
    }
    .clear-button:focus { outline: none; }
    .clear-button { tabindex: -1; }
    .field-row {
      display: flex;
      align-items: stretch;
      gap: 10px;
    }
    .button-group {
      display: flex;
      gap: 10px;
      margin-bottom: 10px;
    }
    .button-group button,
    .button-group a {
      flex: 1;
      padding: 10px;
      background-color: gray;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      text-align: center;
      text-decoration: none;
      font-weight: bold;
    }
    .button-group button.selected {
      background-color: #ffbd59;
      color: black;
    }
    button[type="submit"] {
      background-color: #4CAF50;
      font-weight: bold;
    }
    button[type="resetForm"] {
      background-color: #f44336;
      font-weight: bold;
    }
    button[type="button"] {
      background-color: gray;
    }
    button:hover,
    .button-group a:hover {
      background-color: #fff;
      color: black;
    }
    .quote-button,
    .reserve-button {
      width: 100%;
      padding: 10px;
      margin-top: 20px;
      margin-bottom: 10px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
    }
    .quote-button.inactive,
    .reserve-button.inactive {
      background-color: #ffbd59;
      color: black;
    }
    .quote-button.active {
      background-color: #ffbd59;
      color: black;
    }
    .quote-button:hover {
      background-color: #fff;
      color: black;
    }
    .reserve-button.active {
      background-color: #fff;
      color: black;
    }
    .reserve-button:hover {
      background-color: #fff;
      color: black;
    }
    .reverse-button {
      background-color: gray;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
      padding: 10px;
      text-align: center;
      display: block;
    }
    .reverse-button:hover {
      background-color: #fff;
      color: black;
    }
    .hidden { display: none; }
    .row { display: flex; gap: 10px; }
    #promo-error-box,
    #error-box-minRate,
    #error-box-fieldCheck {
      background-color: #f8d7da;
      color: #721c24;
      border-radius: 8px;
      padding: 10px;
      margin-bottom: 10px;
      display: none;
    }
    #promo-error-box h3,
    #error-box-minRate h3,
    #error-box-fieldCheck h3 {
      margin: 0 0 5px;
    }
    .quote-info {
      margin-top: 20px;
      background-color: #444;
      padding: 10px;
      border-radius: 8px;
    }
    .quote-info h3 {
      text-align: left;
      margin-bottom: 5px;
    }
    .quote-info h4 {
      text-align: left;
      margin-bottom: 10px;
      font-size: 12px;
      font-style: italic;
    }
    .quote-info .row {
      display: flex;
      gap: 10px;
    }
    .quote-info .row > div {
      flex: 1;
      padding: 10px;
      border-radius: 4px;
      text-align: center;
      background-color: #fff;
      color: black;
    }
    .quoteBox3 {
      background-color: #ffbd59;
      font-weight: bold;
    }
    .quote-info p {
      text-align: left;
      font-size: 12px;
      font-style: italic;
    }
    #map-canvas {
      height: 400px;
      width: 100%;
      display: none;
      margin-top: 20px;
    }
    .promo-note {
      font-size: 12px;
      font-style: italic;
      color: #ccc;
    }
    .promo-note a {
      color: #ccc;
      text-decoration: underline;
    }
    .header-note {
      font-size: 12px;
      font-style: italic;
      color: #ccc;
    }
    .header-note a {
      color: #ccc;
      text-decoration: underline;
    }
    
    /* ==============================
       Navbar Styles (from index16.html)
       ============================== */
    .navbar {
      background-color: #000;
      position: fixed;
      top: 0;
      width: 100%;
      z-index: 1000;
      height: 130px;
      transition: height 0.3s;
      overflow: visible;
    }
    .navbar.scrolled { height: 65px; }
    .navbar-container {
      max-width: 1200px;
      margin: auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      height: 100%;
      position: relative;
	  padding: 0 20px;
    }
    .navbar-left {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .hamburger {
      background: none;
      border: none;
      cursor: pointer;
      font-size: 1.8rem;
      color: #fff;
      padding: 0;
      line-height: 1;
    }
	.hamburger:hover { color: #FFBD59; background-color: #000;}
    .reserve-btn {
      display: none;
      background-color: #000;
      border: 2px solid #fff;
      padding: 0.1rem 5px;
      color: #fff;
      font-size: 1.1rem;
      border-radius: 4px;
      cursor: pointer;
      transition: background-color 0.3s, border-color 0.3s, color 0.3s;
    }
    .reserve-btn:hover { 
      background-color: #FFBD59; 
      border-color: #FFBD59;
      color: #000; 
    }
    .navbar-center {
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      z-index: 2;
    }
    .logo {
      height: 250px;
      transition: height 0.3s;
    }
    .logo.scrolled { height: 125px; }
    .navbar-right {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .desktop-social {
      display: flex;
      gap: 10px;
      align-items: center;
      font-size: 1.8rem;
    }
    .desktop-social a {
      color: #fff;
      transition: color 0.3s;
    }
    .desktop-social a:hover { color: #FFBD59; }
    .navbar-menu {
      display: none;
      flex-direction: column;
      background-color: #000;
      position: absolute;
      left: 0;
      padding: 0.5rem 0;
    }
	.navbar-menu a {
  text-decoration: none; /* Removes underline */
  color: #000;           /* Change this to your desired color */
  font-family: 'Figtree', sans-serif; /* Applies Figtree */
}
.navbar-menu li {
  margin: 0;
  padding: 0;
}

.navbar-menu li a {
  display: block;       /* Makes the anchor cover the entire li */
  padding: 15px 25px;   /* Adjust as needed */
  text-decoration: none;
  color: #fff;
  font-family: 'Figtree', sans-serif;
}

.navbar-menu li a:hover {
  background-color: #FFBD59;
  color: #000;
}

.hamburger {
  display: inline-block;
  cursor: pointer;
  width: 30px;
  height: 20px;
  position: relative;
  z-index: 2000; /* ensure it's on top */
}

.hamburger span {
  background: #fff;
  display: block;
  position: absolute;
  height: 3px;
  width: 100%;
  border-radius: 3px;
  left: 0;
  transition: 0.3s ease-in-out;
}

.hamburger span:nth-child(1) {
  top: 0;
}

.hamburger span:nth-child(2) {
  top: 50%;
  transform: translateY(-50%);
}

.hamburger span:nth-child(3) {
  bottom: 0;
}

/* When the hamburger is clicked (open state) */
.hamburger.open span:nth-child(1) {
  top: 50%;
  transform: translateY(-50%) rotate(45deg);
}

.hamburger.open span:nth-child(2) {
  opacity: 0;
}

.hamburger.open span:nth-child(3) {
  bottom: 50%;
  transform: translateY(50%) rotate(-45deg);
}



    .navbar:not(.scrolled) .navbar-menu { top: 130px; }
    .navbar.scrolled .navbar-menu { top: 65px; }
    .navbar-menu.active { display: flex; }
    .navbar-menu li {
      padding: 15px 25px;
      border-bottom: 1px solid #444;
      font-size: 1.2rem;
	  background-color: #FFBD59;
    }
    .navbar-menu li:hover {
      background-color: #222;
    }
    .mobile-social {
      text-align: left;
      padding-left: 20px;
      margin-top: 10px;
	  background-color: black;
    }
    .mobile-social a {
      color: #000;
      font-size: 2rem;
      margin-right: 10px;
      transition: color 0.3s;
    }
    .mobile-social a:hover { color: #FFBD59; }
    @media screen and (max-width: 768px) {
      .navbar, .navbar.scrolled { height: 65px !important; }
      .logo, .logo.scrolled { height: 125px !important; }
      .desktop-only { display: none; }
      .navbar-menu { top: 65px !important; }
    }
    /* Hide these icons on mobile */
    .desktop-social a.hide-mobile { }
    @media screen and (max-width: 768px) {
      .desktop-social a.hide-mobile { display: none; }
    }
	.containerForm { margin-top: 150px; padding-top: 100px; background-color: black }
	@media screen and (max-width: 768px) {
	.containerForm { padding-top: 10px; }
	}
	
	
	
	.fullpage-menu {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: #000;
  z-index: 1500;
  transform: translateY(100%); /* Start off-screen at the bottom */
  transition: transform 0.5s ease-in-out;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

/* Active state slides the menu into view */
.fullpage-menu.active {
  transform: translateY(0);
}

/* Close button */
.fullpage-menu .close-btn {
  position: absolute;
  top: 5px;
  left: 12px;
  font-size: 3rem;
  background: transparent;
  border: none;
  color: #fff;
  cursor: pointer;
  z-index: 2000;
}

.fullpage-menu .close-btn:hover {
  color: #FFBD59;
}

/* Top section: Logo */
.menu-top {
  position: absolute;
  top: 40px;
  left: 50%;
  transform: translateX(-50%);
}
.menu-logo {
  height: 200px; /* Adjust as needed */
}

/* Navigation list */
.menu-list {
  list-style: none;
  text-align: center;
  padding: 0;
  margin: 0;
}
.menu-list li {
  margin: 20px 0;
}
.menu-list li a {
  display: block;
  padding: 15px 25px;
  text-decoration: none;
  color: #fff;
  font-family: 'Figtree', sans-serif;
  font-size: 1.5rem;
  transition: background-color 0.3s, color 0.3s;
}
.menu-list li a:hover {
  background-color: #FFBD59;
  color: #000;
}

/* Bottom section: Social icons */
.menu-bottom {
  position: absolute;
  bottom: 40px;
  left: 50%;
  transform: translateX(-50%);
}
.menu-bottom .social-icons a {
  color: #fff;
  font-size: 2rem;
  margin: 0 10px;
  transition: color 0.3s;
}
.menu-bottom .social-icons a:hover {
  color: #FFBD59;
}

.menu-bottom .social-icons {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 100%;
}
.menu-bottom .social-icons a {
  margin: 0 15px; /* Adjust spacing as needed */
}



  </style>
  
  <!-- Google Maps & jQuery -->
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDQTVdPl8r1EZbhFURs2_BUvpNmEad9jdQ&libraries=places,geometry"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  
  <script type="text/javascript">
    var directionsService;
    var directionsRenderer;
    var geocoder;
    
    function openExternalLink(url) {
      if (url.startsWith("https://wa.me")) {
        openWhatsAppLink(url);
      } else {
        if (navigator.userAgent.includes("Instagram")) {
          window.location.href = url;
        } else {
          window.open(url, "_blank");
        }
      }
    }
    
    function openWhatsAppLink(url) {
      var urlObj = new URL(url);
      var textParam = urlObj.searchParams.get("text") || "";
      var phone = "+41788230803";
      var newUrl = "";
      if (navigator.userAgent.match(/Android/i)) {
        newUrl = "intent://send?phone=" + encodeURIComponent(phone) +
                 "&text=" + encodeURIComponent(textParam) +
                 "#Intent;scheme=whatsapp;package=com.whatsapp;end";
      } else {
        newUrl = "whatsapp://send?phone=" + encodeURIComponent(phone) +
                 "&text=" + encodeURIComponent(textParam);
      }
      window.location.href = newUrl;
    }
    
    function initialize() {
      var inputOrigin = document.getElementById("pickup");
      var inputDestination = document.getElementById("destination");
      var nyon = new google.maps.LatLng(46.3833, 6.2396);
      var radius = 200 * 1000;
      var sw = google.maps.geometry.spherical.computeOffset(nyon, radius, 225);
      var ne = google.maps.geometry.spherical.computeOffset(nyon, radius, 45);
      var nyonBounds = new google.maps.LatLngBounds(sw, ne);
      var options = { bounds: nyonBounds, fields: ["address_components", "geometry", "name"] };
      new google.maps.places.Autocomplete(inputOrigin, options);
      new google.maps.places.Autocomplete(inputDestination, options);
      
      directionsService = new google.maps.DirectionsService();
      directionsRenderer = new google.maps.DirectionsRenderer({
        map: null,
        suppressMarkers: true,
        polylineOptions: { strokeColor: "#ffbd59" }
      });
      geocoder = new google.maps.Geocoder();
      var mapOptions = {
        center: nyon,
        zoom: 10,
        styles: [
          { elementType: "geometry", stylers: [{ color: "#212121" }] },
          { elementType: "labels.icon", stylers: [{ visibility: "off" }] },
          { elementType: "labels.text.fill", stylers: [{ color: "#757575" }] },
          { elementType: "labels.text.stroke", stylers: [{ color: "#212121" }] },
          { featureType: "administrative", elementType: "geometry", stylers: [{ color: "#757575" }] },
          { featureType: "administrative.country", elementType: "labels.text.fill", stylers: [{ color: "#9e9e9e" }] },
          { featureType: "administrative.land_parcel", stylers: [{ visibility: "off" }] },
          { featureType: "administrative.locality", elementType: "labels.text.fill", stylers: [{ color: "#bdbdbd" }] },
          { featureType: "poi", elementType: "labels.text.fill", stylers: [{ color: "#757575" }] },
          { featureType: "poi.park", elementType: "geometry", stylers: [{ color: "#181818" }] },
          { featureType: "poi.park", elementType: "labels.text.fill", stylers: [{ color: "#616161" }] },
          { featureType: "poi.park", elementType: "labels.text.stroke", stylers: [{ color: "#1b1b1b" }] },
          { featureType: "road", elementType: "geometry.fill", stylers: [{ color: "#2c2c2c" }] },
          { featureType: "road", elementType: "labels.text.fill", stylers: [{ color: "#8a8a8a" }] },
          { featureType: "road.arterial", elementType: "geometry", stylers: [{ color: "#373737" }] },
          { featureType: "road.highway", elementType: "geometry", stylers: [{ color: "#3c3c3c" }] },
          { featureType: "road.highway.controlled_access", elementType: "geometry", stylers: [{ color: "#4e4e4e" }] },
          { featureType: "road.local", elementType: "labels.text.fill", stylers: [{ color: "#616161" }] },
          { featureType: "transit", elementType: "labels.text.fill", stylers: [{ color: "#757575" }] },
          { featureType: "water", elementType: "geometry", stylers: [{ color: "#000000" }] },
          { featureType: "water", elementType: "labels.text.fill", stylers: [{ color: "#3d3d3d" }] }
        ]
      };
      var map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);
      directionsRenderer.setMap(map);
    }
    
    function getQueryParams() {
      var params = {};
      window.location.search.substr(1).split("&").forEach(function(item) {
        var parts = item.split("=");
        if(parts[0]) {
          params[parts[0]] = decodeURIComponent(parts[1]);
        }
      });
      return params;
    }
    
    function prefillFieldsFromQuery() {
      var params = getQueryParams();
      if (params.pickup) document.getElementById("pickup").value = params.pickup;
      if (params.destination) document.getElementById("destination").value = params.destination;
      if (params.promoCode) document.getElementById("promoCode").value = params.promoCode;
    }
    
    function updateLogoFromURL() {
      var params = getQueryParams();
      var logoParam = params.logo;
      var logoMapping = {
        "zermatt": "https://limojazz.github.io/limojazz/img/limojazz_zernatt_promo_250.gif",
        "main": "https://limojazz.github.io/limojazz/img/limojazz.svg"
      };
      if (logoParam && logoMapping[logoParam]) {
        var logoImg = document.querySelector("#logo-container img");
        if (logoImg) {
          logoImg.src = logoMapping[logoParam];
        }
      }
    }
    
    function reverseLocations() {
      var pickupElem = document.getElementById("pickup");
      var destinationElem = document.getElementById("destination");
      var temp = pickupElem.value;
      pickupElem.value = destinationElem.value;
      destinationElem.value = temp;
    }
    
    function calculateDistancesIfBothFilled() {
      var origin = document.getElementById("pickup").value;
      var destination = document.getElementById("destination").value;
      if (origin && destination) {
        toggleAirportFields();
        checkServicingArea(origin, destination);
      } else {
        alert("Please enter both pickup and dropoff locations.");
      }
    }
    
    function checkServicingArea(origin, destination) {
      var serviceCenter = new google.maps.LatLng(46.3833, 6.2396);
      var minRadius = 50000;
      var maxRadius = 500000;
      geocoder.geocode({ address: origin }, function(results, status) {
        if (status === google.maps.GeocoderStatus.OK) {
          var originLocation = results[0].geometry.location;
          geocoder.geocode({ address: destination }, function(results, status) {
            if (status === google.maps.GeocoderStatus.OK) {
              var destinationLocation = results[0].geometry.location;
              var distanceToOrigin = google.maps.geometry.spherical.computeDistanceBetween(serviceCenter, originLocation);
              var distanceToDestination = google.maps.geometry.spherical.computeDistanceBetween(serviceCenter, destinationLocation);
              var totalDistance = google.maps.geometry.spherical.computeDistanceBetween(originLocation, destinationLocation);
              var serviceRadius = Math.min(Math.max(minRadius, totalDistance / 2), maxRadius);
              if (distanceToOrigin > serviceRadius && distanceToDestination > serviceRadius) {
                showError("Ride outside our servicing area");
                document.getElementById("quote").classList.add("hidden");
                document.getElementById("map-canvas").style.display = "none";
                document.getElementById("reserveFields").classList.add("hidden");
                document.querySelector(".reserve-button").classList.add("hidden");
              } else {
                calculateDistances(origin, destination);
              }
            } else {
              alert("Geocode for destination failed due to: " + status);
            }
          });
        } else {
          alert("Geocode for origin failed due to: " + status);
        }
      });
    }
    
    function calculatePrice(distanceValue, durationValue, type) {
      if (type === "myFare") {
        var baseRate = 6.00;
        var initialPerKmRate = 3.80;
        var minimumPerKmRate = 3.00;
        var distanceInKm = distanceValue / 1000;
        var durationInMin = durationValue / 60;
        function calculatePerKmRate(distance) {
          if (distance >= 700) return minimumPerKmRate;
          var rateDecrease = (initialPerKmRate - minimumPerKmRate) * (distance / 700);
          return initialPerKmRate - rateDecrease;
        }
        var perKmRate = calculatePerKmRate(distanceInKm);
        var perMinRate = 0;
        var totalPrice = baseRate + (perKmRate * distanceInKm) + (perMinRate * durationInMin);
    
        var flatRates = { "nyon": 90, "eysins": 90, "lausanne": 230, "zermatt": 900 };
        var pickupValue = document.getElementById("pickup").value.toLowerCase();
        var dropoffValue = document.getElementById("destination").value.toLowerCase();
        function getMatchingCity(input) {
          input = input.toLowerCase();
          for (var city in flatRates) {
            if (input.includes(city)) return city;
          }
          return null;
        }
        var pickupCity = getMatchingCity(pickupValue);
        var dropoffCity = getMatchingCity(dropoffValue);
        if (pickupValue.includes("gva") && dropoffCity) {
          totalPrice = flatRates[dropoffCity];
        } else if (dropoffValue.includes("gva") && pickupCity) {
          totalPrice = flatRates[pickupCity];
        }
    
        var normalPrice;
        if (totalPrice < 15) {
          normalPrice = 15;
        } else if (totalPrice < 80) {
          normalPrice = Math.ceil(totalPrice / 5) * 5;
        } else {
          normalPrice = Math.floor(totalPrice / 10) * 10;
        }
    
        var promoInput = document.getElementById("promoCode").value.toLowerCase().trim();
        var promoCodes = {
          "nyon10": { city: "nyon", multiplier: 0.9 },
          "zermatt20": { city: "zermatt", multiplier: 0.8 },
          "gva5": { all: true, multiplier: 0.95 }
        };
    
        var finalPrice = normalPrice;
        var promoApplied = false;
        if (promoInput !== "") {
          if (promoCodes.hasOwnProperty(promoInput)) {
            var promoData = promoCodes[promoInput];
            var applicable = false;
            if (promoData.all) {
              if (pickupValue.includes("gva") || dropoffValue.includes("gva")) {
                applicable = true;
              } else {
                showPromoError("Promo code not applicable to the selected route");
              }
            } else {
              if ((pickupValue.includes("gva") && dropoffCity === promoData.city) ||
                  (dropoffValue.includes("gva") && pickupCity === promoData.city)) {
                applicable = true;
              } else {
                showPromoError("Promo code not applicable to the selected route");
              }
            }
            if (applicable) {
              promoApplied = true;
              finalPrice = Math.floor(normalPrice * promoData.multiplier);
            }
          } else {
            showPromoError("Invalid promo code");
          }
        }
    
        return { finalPrice: finalPrice, normalPrice: normalPrice, promoApplied: promoApplied };
      } else if (type === "taxi") {
        var baseRate = 6.30;
        var distanceInKm = distanceValue / 1000;
        var durationInMin = durationValue / 60;
        var perKmRate = 3.80;
        var perMinRate = 0;
        var totalPrice = baseRate + (perKmRate * distanceInKm) + (perMinRate * durationInMin) + 5 + Math.floor(distanceInKm / 50) * 5;
        totalPrice = Math.ceil(totalPrice);
        return { finalPrice: totalPrice.toFixed(2), promoApplied: false };
      } else if (type === "uberVan") {
        var baseRate = 8.00;
        var distanceInKm = distanceValue / 1000;
        var durationInMin = durationValue / 60;
        var perKmRate = 3.60;
        var perMinRate = 0.60;
        var totalPrice = baseRate + (perKmRate * distanceInKm) + (perMinRate * durationInMin);
        totalPrice = Math.ceil(totalPrice);
        return { finalPrice: totalPrice.toFixed(2), promoApplied: false };
      }
    }
    
    function calculateDistances(origin, destination) {
      document.getElementById("promo-error-box").style.display = "none";
      var departureTime = new Date(new Date().getTime() + 24 * 60 * 60 * 1000);
      var request = {
        origin: origin,
        destination: destination,
        travelMode: google.maps.TravelMode.DRIVING,
        drivingOptions: { departureTime: departureTime, trafficModel: "optimistic" }
      };
      
      directionsService.route(request, function(result, status) {
        if (status === google.maps.DirectionsStatus.OK) {
          directionsRenderer.setDirections(result);
          var distance = result.routes[0].legs[0].distance.value;
          var duration = result.routes[0].legs[0].duration.value;
          var priceObj = calculatePrice(distance, duration, "myFare");
          window.currentFareObj = priceObj;
    
          var taxiPrice = calculatePrice(distance, duration, "taxi").finalPrice;
          var uberVanPrice = calculatePrice(distance, duration, "uberVan").finalPrice;
          var distanceText = result.routes[0].legs[0].distance.text;
          var durationText = result.routes[0].legs[0].duration.text;
    
          document.getElementById("quoteTitle").innerText = "Quote";
          document.getElementById("quoteSubtitle").innerText = "Mercedes V-Class (up to 6 passengers and 5 large suitcases)";
          quoteBox1Label = "Distance";
          quoteBox2Label = "Duration";
          quoteBox3Label = "Estimated Fare";
          document.getElementById("quoteBox1").innerText = "~ " + distanceText;
          document.getElementById("quoteBox2").innerText = "~ " + durationText;
    
          var displayPrice;
          if (priceObj.promoApplied) {
            displayPrice = "CHF " + priceObj.finalPrice + " <span style='text-decoration: line-through;'>CHF " + priceObj.normalPrice + "</span>";
          } else {
            displayPrice = "CHF " + priceObj.finalPrice;
          }
          document.getElementById("quoteBox3").innerHTML = displayPrice;
    
          document.getElementById("quoteNote1").innerHTML = `
            <ul style="list-style-type: disc; padding-left: 10px; margin-left: 0;">
              <li style="margin-bottom: 8px;">Quote subject to change based on service area or special events.</li>
              <li style="margin-bottom: 8px;">Comparison: Estimated Taxi price: CHF ${taxiPrice}, Estimated UberVan price: CHF ${uberVanPrice}</li>
              <li style="margin-bottom: 8px;">Comparisons are provided for informational purposes only.</li>
            </ul>`;
          document.getElementById("quote").classList.remove("hidden");
          document.getElementById("map-canvas").style.display = "block";
          document.querySelector(".quote-button").classList.remove("inactive");
          document.querySelector(".quote-button").classList.add("active");
          document.querySelector(".quote-button").innerText = "Update Quote";
          document.querySelector(".reserve-button").classList.remove("hidden");
          if (priceObj.finalPrice < 80) {
            showError("Quote below the Minimum Reservation fare");
            document.querySelector(".reserve-button").innerText = "Reserve for CHF 80";
          }
        } else {
          alert("Directions request failed due to " + status);
        }
      });
    }
    
    function showPromoError(errorType) {
      var promoErrorBox = document.getElementById("promo-error-box");
      promoErrorBox.style.display = "block";
      if (errorType === "Invalid promo code") {
        promoErrorBox.innerHTML = "<h3>Invalid Promo Code</h3><p>The promo code entered is not valid. It will be ignored.</p>";
      } else if (errorType === "Promo code not applicable to the selected route") {
        promoErrorBox.innerHTML = "<h3>Promo Code Not Applicable</h3><p>This promo code cannot be applied to the selected route and will be ignored.</p>";
      }
    }
    
    function showError(errorType) {
      var errorBox = document.getElementById("error-box-minRate");
      errorBox.style.display = "block";
      if (errorType === "Ride outside our servicing area") {
        errorBox.innerHTML = '<h3>Ride outside our servicing area</h3><p><i>Please describe your needs further via WhatsApp or call us and we’ll try to help.</i></p>' +
          '<div class="button-group">' +
          '<button style="width: 50%;" class="whatsapp-button" onclick="generateWhatsAppLink(event, true)">Contact us via WhatsApp</button>' +
          '<a href="tel:+41788230803" target="_blank" style="width: 50%;">Call us +41 78 823 08 03</a>' +
          "</div>";
      } else if (errorType === "Quote below the Minimum Reservation fare") {
        errorBox.innerHTML = "<h3>Quote below the Minimum Reservation fare</h3><p>Our minimum reservation rate is CHF 80. Please call us for urgent rides or note that the price will be adjusted to CHF 80.</p>";
        document.querySelector(".reserve-button").innerText = "Reserve for CHF 80";
      }
    }
    
    function selectRideType(type) {
      const singleRideButton = document.getElementById('singleRideButton');
      const byTheHourButton = document.getElementById('byTheHourButton');
      const byTheHourFields = document.getElementById('byTheHourFields');
      const dropoffLocationContainer = document.getElementById('dropoffLocationContainer');
    
      if (type === 'singleRide') {
        singleRideButton.classList.add('selected');
        byTheHourButton.classList.remove('selected');
        byTheHourFields.classList.add('hidden');
        dropoffLocationContainer.classList.remove('hidden');
        document.getElementById('map-canvas').style.display = 'none';
        document.getElementById('reverseButtonId').classList.remove("hidden");
        document.getElementById('quote').classList.add('hidden');
        document.querySelector(".reserve-button").classList.add("hidden");
        document.getElementById('oneWayReturnButtons').classList.remove('hidden');
        document.getElementById('reserveFields').classList.add('hidden');
      } else {
        singleRideButton.classList.remove('selected');
        byTheHourButton.classList.add('selected');
        byTheHourFields.classList.remove('hidden');
        dropoffLocationContainer.classList.add('hidden');
        document.getElementById('map-canvas').style.display = 'none';
        document.getElementById('reverseButtonId').classList.add("hidden");
        document.getElementById('quote').classList.add('hidden');
        document.querySelector(".reserve-button").classList.add("hidden");
        document.getElementById('oneWayReturnButtons').classList.add('hidden');
        document.getElementById('reserveFields').classList.add('hidden');				
      }
    }
		
    function calculateQuote() {
      if (document.getElementById("byTheHourButton")?.classList.contains("selected")) {
        calculateHourlyQuote();
        document.getElementById('quote').classList.remove('hidden');
      } else {
        calculateDistancesIfBothFilled();
        document.getElementById('quote').classList.remove('hidden');
      }
    }
    
    function calculateHourlyQuote() {
      const numberOfDays = parseInt(document.getElementById("numberOfDays").value, 10);
      const hoursPerDay = parseInt(document.getElementById("HoursPerDay").value, 10);
      const numberOfHours = numberOfDays * hoursPerDay;
      let pricePerHour = numberOfHours > 10 ? 100 : 120 - (2 * (numberOfHours - 1));
      const totalPrice = numberOfHours * pricePerHour;
      const kmIncludedPerHour = 20;
      const kmIncludedTotal = numberOfHours * kmIncludedPerHour;
      const blacklanePricePerHour = 130;
      let blacklaneTotalPrice = numberOfHours > 2 ? blacklanePricePerHour * numberOfHours : 260;
    
      document.getElementById("quoteTitle").innerText = "Chauffeur at disposal Quote";
      document.getElementById("quoteSubtitle").innerText = "Mercedes V-Class (up to 6 passengers and 5 large suitcases)";
      quoteBox1Label = "Number of Hours";
      quoteBox2Label = "Kilometers incl.";
      quoteBox3Label = "Estimated Fare";
      document.getElementById("quoteBox1").innerText = `${numberOfHours} hours`;
      document.getElementById("quoteBox2").innerText = `${kmIncludedTotal} km included`;
      document.getElementById("quoteBox3").innerText = `CHF ${totalPrice}`;
      document.getElementById("quoteNote1").innerHTML = `
        <ul style="list-style-type: disc; padding-left: 10px; margin-left: 0;">
          <li style="margin-bottom: 8px;">Quote subject to change based on service area or special events.</li>
          <li style="margin-bottom: 8px;">Includes ${kmIncludedPerHour} km per booked hour; extra charges may apply.</li>
          <li style="margin-bottom: 8px;">Comparison: Estimated Blacklane price: CHF ${blacklaneTotalPrice}</li>
          <li style="margin-bottom: 8px;">Comparisons are for informational purposes only.</li>
        </ul>`;
    
      document.getElementById("quote").classList.remove("hidden");
      document.querySelector(".quote-button").classList.remove("inactive");
      document.querySelector(".quote-button").classList.add("active");
      document.querySelector(".quote-button").innerText = "Update Quote";
      document.querySelector(".reserve-button").classList.remove("hidden");
    }
    
    function selectTripType(type) {
      const oneWayButton = document.getElementById("oneWayButton");
      const returnButton = document.getElementById("returnButton");
      const returnFields = document.getElementById("returnFields");
      oneWayButton.classList.remove("selected");
      returnButton.classList.remove("selected");
      if (type === "oneWay") {
        oneWayButton.classList.add("selected");
        returnFields.classList.add("hidden");
      } else {
        returnButton.classList.add("selected");
        returnFields.classList.remove("hidden");
      }
      toggleAirportFields();
    }
    
    function toggleAirportFields() {
      const airportFields = document.getElementById("airportFields");
      const pickupValue = document.getElementById("pickup").value.toLowerCase();
      const dropoffValue = document.getElementById("destination").value.toLowerCase();
      const returnSelected = document.getElementById("returnButton")?.classList.contains("selected");
      if (pickupValue.includes("gva") || (dropoffValue.includes("gva") && returnSelected)) {
        airportFields.classList.remove("hidden");
      } else {
        airportFields.classList.add("hidden");
      }
    }
    
    function selectArrivalName(name) {
      const buttons = document.getElementById("arrivalNameButtons").getElementsByTagName("button");
      const arrivalNameInput = document.getElementById("arrivalName");
      for (let button of buttons) { button.classList.remove("selected"); }
      if (name === "Company Logo") {
        arrivalNameInput.value = "Company Logo";
        buttons[0].classList.add("selected");
      } else if (name === "My Name") {
        arrivalNameInput.value = document.getElementById("name").value;
        buttons[1].classList.add("selected");
      } else {
        arrivalNameInput.value = "LimoJazz Logo";
        buttons[2].classList.add("selected");
      }
    }
    
    function selectPassengerCount(count) {
      const buttons = document.getElementById("passengerButtons").getElementsByTagName("button");
      for (let button of buttons) { button.classList.remove("selected"); }
      buttons[count - 1].classList.add("selected");
    }
    
    function selectSuitcaseCount(count) {
      const buttons = document.getElementById("suitcaseButtons").getElementsByTagName("button");
      for (let button of buttons) { button.classList.remove("selected"); }
      buttons[count].classList.add("selected");
    }
    
    function toggleReserveFields() {
      const reserveButton = document.querySelector(".reserve-button");
      const reserveFields = document.getElementById("reserveFields");
      toggleAirportFields();
      if (reserveFields.classList.contains("hidden")) {
        reserveFields.classList.remove("hidden");
        reserveButton.classList.add("active");
        reserveButton.classList.remove("inactive");
      } else {
        reserveFields.classList.add("hidden");
        reserveButton.classList.add("inactive");
        reserveButton.classList.remove("active");
      }
    }
    
    function validateFormFields() {
      const requiredFields = [
        { id: "name", message: "Full Name" },
        { id: "pickup", message: "Pick-Up Location" },
        { id: "date", message: "Date" },
        { id: "pickupTime", message: "Time" },
        { id: "passengerButtons", message: "Number of Passengers" },
        { id: "suitcaseButtons", message: "Number of Large Suitcases" }
      ];
      const missingFields = requiredFields.filter(field => {
        if (field.id === "passengerButtons" || field.id === "suitcaseButtons") {
          return !document.querySelector(`#${field.id} .selected`);
        } else {
          return !document.getElementById(field.id).value;
        }
      });
      const date = new Date(document.getElementById("date").value);
      const today = new Date();
      today.setHours(0, 0, 0, 0);
      const returnDate = new Date(document.getElementById("returnDate").value);
      if (date < today) {
        missingFields.push({ id: "date", message: "Date cannot be in the past" });
      }
      if (document.getElementById("returnButton").classList.contains("selected") && !document.getElementById("returnDate").value) {
        missingFields.push({ id: "returnDate", message: "Return Date" });
      }
      if (document.getElementById("returnButton").classList.contains("selected") && !document.getElementById("returnTime").value) {
        missingFields.push({ id: "returnTime", message: "Return Time" });
      }
      if (document.getElementById("returnButton").classList.contains("selected") && returnDate < date) {
        missingFields.push({ id: "returnDate", message: "Return date cannot be before the first date" });
      }
      if (!document.getElementById("airportFields").classList.contains("hidden") && !document.getElementById("flightNumber").value) {
        missingFields.push({ id: "flightNumber", message: "Flight Number" });
      }
      var errorBox = document.getElementById("error-box-fieldCheck");
      errorBox.style.display = "none";
      errorBox.innerHTML = "";
      if (missingFields.length > 0) {
        errorBox.style.display = "block";
        errorBox.innerHTML = "<h3>Please fill in the following fields:</h3><ul>" +
          missingFields.map(field => `<li>${field.message}</li>`).join("") +
          "</ul>";
        return false;
      }
      return true;
    }
    
    function generateWhatsAppLink(event, isError = false, errorType = "") {
      event.preventDefault();
      if (!isError && !validateFormFields()) return;
      const pickup = document.getElementById("pickup").value;
      const destination = document.getElementById("destination").value;
      const quoteBox1 = document.getElementById("quoteBox1").innerText;
      const quoteBox2 = document.getElementById("quoteBox2").innerText;
      var quoteBox3Text;
      if (window.currentFareObj && window.currentFareObj.promoApplied) {
        quoteBox3Text = "CHF " + window.currentFareObj.finalPrice + " (was CHF " + window.currentFareObj.normalPrice + ")";
      } else {
        quoteBox3Text = document.getElementById("quoteBox3").innerText;
      }
      if (errorType === "outside") {
        let whatsappMessage = "*OUTSIDE SERVICING AREA:*\n\n";
        whatsappMessage += `*Pick-Up Location:* ${pickup}\n`;
        whatsappMessage += `*Drop-off Location:* ${destination}\n\n`;
        whatsappMessage += `_Please describe your needs further and we’ll try to help._`;
        openExternalLink(`https://wa.me/+41788230803?text=${encodeURIComponent(whatsappMessage)}`);
      } else if (errorType === "below80") {
        let whatsappMessage = "*URGENT REQUEST:*\n\n";
        whatsappMessage += `Are you available for the following ride now?\n\n`;
        whatsappMessage += `*Pickup Location:* ${pickup}\n`;
        whatsappMessage += `*Dropoff Location:* ${destination}\n`;
        whatsappMessage += `*${quoteBox1Label}:* ${quoteBox1}\n`;
        whatsappMessage += `*${quoteBox2Label}:* ${quoteBox2}\n`;
        whatsappMessage += `*${quoteBox3Label}:* ${quoteBox3Text}\n`;
        openExternalLink(`https://wa.me/+41788230803?text=${encodeURIComponent(whatsappMessage)}`);
      } else {
        const name = document.getElementById("name").value;
        const company = document.getElementById("company").value;
        const date = document.getElementById("date").value;
        const pickupTime = document.getElementById("pickupTime").value;
        const returnDate = document.getElementById("returnDate").value;
        const returnTime = document.getElementById("returnTime").value;
        const flightNumber = document.getElementById("flightNumber").value;
        const arrivalName = document.getElementById("arrivalName").value;
        const passengers = document.querySelector("#passengerButtons .selected")?.innerText;
        const suitcases = document.querySelector("#suitcaseButtons .selected")?.innerText;
        const message = document.getElementById("message").value;
        const promoCode = document.getElementById("promoCode").value;
        const subject = `${date} ${name}`;
        let whatsappMessage = "*RESERVATION REQUEST:*\n\n";
        whatsappMessage += `*Pick-Up Location:* ${pickup}\n`;
        whatsappMessage += `*Drop-off Location:* ${destination}\n`;
        whatsappMessage += `*Full Name:* ${name}\n`;
        if (company) whatsappMessage += `*Company Name:* ${company}\n`;
        whatsappMessage += `*Date & Time:* ${date} ${pickupTime}\n`;
        if (returnDate && returnTime) whatsappMessage += `*Return Date & Time:* ${returnDate} ${returnTime}\n`;
        if (flightNumber) whatsappMessage += `*Flight Number:* ${flightNumber}\n`;
        if (!document.getElementById("airportFields").classList.contains("hidden") && arrivalName) {
          whatsappMessage += `*Name for Pickup at Arrivals:* ${arrivalName}\n`;
        }
        whatsappMessage += `*Number of Passengers:* ${passengers}\n`;
        whatsappMessage += `*Number of Large Suitcases:* ${suitcases}\n\n`;
        whatsappMessage += `*QUOTE:*\n`;
        if (document.getElementById("byTheHourButton")?.classList.contains("selected")) {
          const numberOfDays = parseInt(document.getElementById("numberOfDays").value, 10);
          const hoursPerDay = parseInt(document.getElementById("HoursPerDay").value, 10);
          whatsappMessage += `*Number of Days:* ${numberOfDays}\n`;
          whatsappMessage += `*Hours per Day:* ${hoursPerDay}\n`;
        }
        whatsappMessage += `*${quoteBox1Label}:* ${quoteBox1}\n`;
        whatsappMessage += `*${quoteBox2Label}:* ${quoteBox2}\n`;
        whatsappMessage += `*${quoteBox3Label}:* ${quoteBox3Text}${document.getElementById("returnButton").classList.contains("selected") ? " (per way)" : ""}\n`;
        if (message) whatsappMessage += `*Additional Information:* ${message}\n`;
        if (promoCode) whatsappMessage += `*Promo Code:* ${promoCode}\n`;
        openExternalLink(`https://wa.me/+41788230803?text=${encodeURIComponent(whatsappMessage)}`);
      }
    }
    
    function generateEmailMessage() {
      if (!validateFormFields()) return;
      const pickup = document.getElementById("pickup").value;
      const destination = document.getElementById("destination").value;
      const name = document.getElementById("name").value;
      const company = document.getElementById("company").value;
      const date = document.getElementById("date").value;
      const pickupTime = document.getElementById("pickupTime").value;
      const returnDate = document.getElementById("returnDate").value;
      const returnTime = document.getElementById("returnTime").value;
      const flightNumber = document.getElementById("flightNumber").value;
      const arrivalName = document.getElementById("arrivalName").value;
      const passengers = document.querySelector("#passengerButtons .selected")?.innerText;
      const suitcases = document.querySelector("#suitcaseButtons .selected")?.innerText;
      const message = document.getElementById("message").value;
      const promoCode = document.getElementById("promoCode").value;
      const subject = `${date} ${name}`;
      let quoteBox3Text;
      if (window.currentFareObj && window.currentFareObj.promoApplied) {
        quoteBox3Text = "CHF " + window.currentFareObj.finalPrice + " (was CHF " + window.currentFareObj.normalPrice + ")";
      } else {
        quoteBox3Text = document.getElementById("quoteBox3").innerText;
      }
      let emailBody = "Reservation Request:\n\n";
      emailBody += `Pick-Up Location: ${pickup}\n`;
      emailBody += `Drop-off Location: ${destination}\n`;
      emailBody += `Full Name: ${name}\n`;
      if (company) emailBody += `Company Name: ${company}\n`;
      emailBody += `Date & Time: ${date} ${pickupTime}\n`;
      if (returnDate && returnTime) emailBody += `Return Date & Time: ${returnDate} ${returnTime}\n`;
      if (flightNumber) emailBody += `Flight Number: ${flightNumber}\n`;
      if (!document.getElementById("airportFields").classList.contains("hidden") && arrivalName) {
        emailBody += `Name for Pickup at Arrivals: ${arrivalName}\n`;
      }
      emailBody += `Number of Passengers: ${passengers}\n`;
      emailBody += `Number of Large Suitcases: ${suitcases}\n\nQUOTE:\n`;
      if (document.getElementById("byTheHourButton")?.classList.contains("selected")) {
        const numberOfDays = parseInt(document.getElementById("numberOfDays").value, 10);
        const hoursPerDay = parseInt(document.getElementById("HoursPerDay").value, 10);
        emailBody += `Number of Days: ${numberOfDays}\n`;
        emailBody += `Hours per Day: ${hoursPerDay}\n`;
      }
      emailBody += `${quoteBox1Label}: ${document.getElementById("quoteBox1").innerText}\n`;
      emailBody += `${quoteBox2Label}: ${document.getElementById("quoteBox2").innerText}\n`;
      emailBody += `${quoteBox3Label}: ${quoteBox3Text}${document.getElementById("returnButton").classList.contains("selected") ? " (per way)" : ""}\n`;
      if (message) emailBody += `Additional Information: ${message}\n`;
      openExternalLink(`mailto:reservation@limojazz.ch?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(emailBody)}`);
    }
    
    function customResetAllExcept() {
      const pickupVal = document.getElementById("pickup").value;
      const dropoffVal = document.getElementById("destination").value;
      const promoVal = document.getElementById("promoCode").value;
      document.getElementById("reservationForm").reset();
      document.getElementById("pickup").value = pickupVal;
      document.getElementById("destination").value = dropoffVal;
      document.getElementById("promoCode").value = promoVal;
    }
    
    var currentLocationAddress = sessionStorage.getItem("currentLocationAddress") || "";
    function setFieldToAirport(fieldId) {
      document.getElementById(fieldId).value = "Geneva Airport (GVA)";
    }
    function setFieldToCurrentLocation(fieldId) {
      if (currentLocationAddress) {
        document.getElementById(fieldId).value = currentLocationAddress;
        return;
      }
      document.getElementById(fieldId).value = "Current location loading, please wait...";
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          function(position) {
            var latLng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
            geocoder.geocode({ location: latLng }, function(results, status) {
              if (status === google.maps.GeocoderStatus.OK && results && results.length > 0) {
                currentLocationAddress = results[0].formatted_address;
                sessionStorage.setItem("currentLocationAddress", currentLocationAddress);
                document.getElementById(fieldId).value = currentLocationAddress;
              } else {
                alert("Could not determine current location");
                document.getElementById(fieldId).value = "";
              }
            });
          },
          function(error) {
            alert("Error getting location: " + error.message);
            document.getElementById(fieldId).value = "";
          }
        );
      } else {
        alert("Geolocation is not supported by this browser.");
        document.getElementById(fieldId).value = "";
      }
    }
    
    window.addEventListener("load", function () {
      initialize();
      prefillFieldsFromQuery();
      updateLogoFromURL();
      document.getElementById("oneWayButton").click();
    });
    document.getElementById("pickup").addEventListener("input", toggleAirportFields);
    document.getElementById("destination").addEventListener("input", toggleAirportFields);
    document.getElementById("date").addEventListener("input", function () {
      const date = new Date(this.value);
      const today = new Date();
      today.setHours(0, 0, 0, 0);
      if (date < today) {
        alert("Date cannot be in the past.");
        this.value = "";
      }
      document.getElementById("returnDate").setAttribute("min", this.value);
    });
    document.getElementById("returnDate").addEventListener("input", function () {
      const returnDate = new Date(this.value);
      const startDate = new Date(document.getElementById("date").value);
      if (returnDate < startDate) {
        alert("Return date cannot be prior to the first date.");
        this.value = "";
      }
    });
    function clearField(fieldId) {
      const field = document.getElementById(fieldId);
      field.value = '';
      field.focus();
    }
  </script>
</head>
<body>
  <!-- ==============================
       Navbar from index16.html
       ============================== -->
  <nav class="navbar" id="navbar">
    <div class="navbar-container container">
      <div class="navbar-left">
        <button class="hamburger" id="mobile-menu-btn">
          <i class="fas fa-bars"></i>
        </button>
        <a href="https://limojazz.github.io/limojazz/index.html">
          <button class="reserve-btn" id="reserve-btn">Home</button>
        </a>
      </div>
      <div class="navbar-center">
        <img src="https://limojazz.github.io/limojazz/img/limojazz.svg" alt="LimoJazz Logo" class="logo" id="logo">
      </div>
      <div class="navbar-right">
        <div class="desktop-social" id="desktop-social">
          <a href="https://www.facebook.com/limojazz" target="_blank" class="hide-mobile"><i class="fab fa-facebook"></i></a>
          <a href="https://www.instagram.com/limojazz.ch" target="_blank"><i class="fab fa-instagram"></i></a>
          <a href="https://wa.me/+41788230803" target="_blank"><i class="fab fa-whatsapp"></i></a>
          <a href="https://drive.google.com/uc?export=download&id=1iXYaksnXOtVasW-ITL57dtWF2q0MVQvj" download target="_blank" class="hide-mobile"><i class="fas fa-address-card"></i></a>
          <a href="tel:+41788230803" target="_blank"><i class="fas fa-phone-square-alt"></i></a>
        </div>
      </div>
      <!-- <ul class="navbar-menu" id="navbar-menu"> -->
        <!-- <li><a href="#cover">Home</a></li> -->
        <!-- <li><a href="https://limojazz.github.io/limojazz/reservation.html">Reservation</a></li> -->
        <!-- <li><a href="#contact">Contact</a></li> -->
        <!-- <li class="mobile-social"> -->
          <!-- <div class="mobile-social-icons"> -->
            <!-- <a href="https://www.facebook.com/limojazz" target="_blank"><i class="fab fa-facebook"></i></a> -->
            <!-- <a href="https://www.instagram.com/limojazz.ch" target="_blank"><i class="fab fa-instagram"></i></a> -->
            <!-- <a href="https://wa.me/+41788230803" target="_blank"><i class="fab fa-whatsapp"></i></a> -->
            <!-- <a href="https://drive.google.com/uc?export=download&id=1iXYaksnXOtVasW-ITL57dtWF2q0MVQvj" download target="_blank"><i class="fas fa-address-card"></i></a> -->
            <!-- <a href="tel:+41788230803" target="_blank"><i class="fas fa-phone-square-alt"></i></a> -->
          <!-- </div> -->
        <!-- </li> -->
      <!-- </ul> -->
    </div>
  </nav>

<!-- fullpage-menu.html -->
<div class="fullpage-menu" id="fullpage-menu">
  <!-- Close button -->
  <button class="close-btn" id="menu-close-btn">&times;</button>
  
  <!-- Top section: Logo -->
  <div class="menu-top">
    <img src="https://limojazz.github.io/limojazz/img/limojazz.svg" alt="LimoJazz Logo" class="menu-logo">
  </div>
  
  <!-- Middle section: Navigation items -->
  <ul class="menu-list">
    <li><a href="home.html">Home</a></li>
    <li><a href="reservation.html">Reservation</a></li>
    <li><a href="#contact">Contact</a></li>
  </ul>
  
  <!-- Bottom section: Social icons -->
  <div class="menu-bottom">
    <div class="social-icons">
			<a href="https://www.facebook.com/limojazz" target="_blank"><i class="fab fa-facebook"></i></a>
            <a href="https://www.instagram.com/limojazz.ch" target="_blank"><i class="fab fa-instagram"></i></a>
            <a href="https://wa.me/+41788230803" target="_blank"><i class="fab fa-whatsapp"></i></a>
            <a href="https://drive.google.com/uc?export=download&id=1iXYaksnXOtVasW-ITL57dtWF2q0MVQvj" download target="_blank"><i class="fas fa-address-card"></i></a>
            <a href="tel:+41788230803" target="_blank"><i class="fas fa-phone-square-alt"></i></a>
    </div>
  </div>
</div>


  <!-- ==============================
       Main Reservation Content
       ============================== -->
  <!-- The original logo container has been removed -->
  <div class="container containerForm">
    <h2>Quote instantly!</h2>
    <h3>Reserve in less than a minute!</h3>
    
    <form id="reservationForm" onsubmit="generateWhatsAppLink(event)">
      <!-- Standard vs. Hourly Reservation Buttons -->
      <div class="button-group">
        <button type="button" id="singleRideButton" class="selected" onclick="selectRideType('singleRide')">Standard Reservation</button>
        <button type="button" id="byTheHourButton" onclick="selectRideType('byTheHour')">Hourly Reservation</button>
      </div>
      
      <!-- Hourly Fields -->
      <div id="byTheHourFields" class="hidden">
        <div class="row">
          <div class="input-container" style="flex: 1;">
            <label for="numberOfDays">Day(s)</label>
            <input type="number" id="numberOfDays" name="numberOfDays" min="1" max="30" value="1">
          </div>
          <div class="input-container" style="flex: 1;">
            <label for="HoursPerDay">Hour(s) (per Day)</label>
            <input type="number" id="HoursPerDay" name="HoursPerDay" min="1" max="12" value="1">
          </div>
        </div>
      </div>
      
      <!-- Pick-Up Field with In-Field Buttons -->
      <div class="input-group">
        <div class="input-container">
          <label for="pickup">Pick-Up Location</label>
          <input type="text" id="pickup" name="pickup" placeholder="Geneva Airport (GVA), Switzerland" required value="">
          <button type="button" class="infield-button btn-current" tabindex="-1" title="Current Location" onclick="setFieldToCurrentLocation('pickup')">&#x2299;</button>
          <button type="button" class="infield-button btn-airport" tabindex="-1" title="Geneva Airport (GVA)" onclick="setFieldToAirport('pickup')">&#x2708;</button>
          <button type="button" class="infield-button btn-clear" tabindex="-1" title="Clear" onclick="clearField('pickup')">&times;</button>
        </div>
      </div>
      
      <!-- Drop-off Field with In-Field Buttons -->
      <div class="input-group" id="dropoffLocationContainer">
        <div class="input-container">
          <label for="destination">Drop-off Location</label>
          <input type="text" id="destination" name="destination" placeholder="Victoria-Jungfrau Grand Hotel &amp; Spa, Interlaken, Switzerland" required value="">
          <button type="button" class="infield-button btn-current" tabindex="-1" title="Current Location" onclick="setFieldToCurrentLocation('destination')">&#x2299;</button>
          <button type="button" class="infield-button btn-airport" tabindex="-1" title="Geneva Airport (GVA)" onclick="setFieldToAirport('destination')">&#x2708;</button>
          <button type="button" class="infield-button btn-clear" tabindex="-1" title="Clear" onclick="clearField('destination')">&times;</button>
        </div>
      </div>
      

      <!-- Revised Promo Code + Reverse Button using arrivalName strategy -->
      <div class="input-container">
        <label for="promoCode">Promo Code</label>
        <div class="field-row">
          <div style="position: relative; flex: 3;">
            <input type="text" id="promoCode" name="promoCode" placeholder="Enter promo code" value="">
            <button type="button" class="clear-button" tabindex="-1" onclick="document.getElementById('promoCode').value=''">&times;</button>
          </div>
          <div style="flex: 1;" id="reverseButtonId">
            <button type="button" style="width: 100%;" class="reverse-button" tabindex="-1" onclick="reverseLocations()">&#x21C5; Reverse</button>
          </div>
        </div>
        <small class="promo-note">
          Follow us on <a href="https://www.instagram.com/limojazz.ch" tabindex="-1" target="_blank">Instagram</a> and <a href="https://www.facebook.com/limojazz" tabindex="-1" target="_blank">Facebook</a> for exclusive deals and insider promos!
        </small>
      </div>
      
      <div id="promo-error-box"></div>
      <button type="button" class="quote-button inactive" onclick="calculateQuote()">Quote</button>
      
      <!-- Map -->
      <div id="map-canvas"></div>
      
      <!-- Quote Info -->
      <div class="quote-info hidden" id="quote">
        <h3 id="quoteTitle">Quote</h3>
        <h4 id="quoteSubtitle"></h4>
        <div class="row">
          <div class="quoteBox1" id="quoteBox1"></div>
          <div class="quoteBox2" id="quoteBox2"></div>
          <div class="quoteBox3" id="quoteBox3"></div>
        </div>
        <p id="quoteNote1"></p>
        <p id="quoteNote2"></p>
      </div>
      <div id="error-box-minRate"></div>
      
      <!-- Reserve Button -->
      <button type="button" class="reserve-button inactive hidden" onclick="toggleReserveFields()">Reserve</button>
      
      <!-- Reserve Fields -->
      <div id="reserveFields" class="hidden">
        <div class="button-group" id="oneWayReturnButtons">
          <button type="button" style="width: 50%;" id="oneWayButton" onclick="selectTripType('oneWay')">One Way</button>
          <button type="button" style="width: 50%;" id="returnButton" onclick="selectTripType('return')">Return</button>
        </div>
        <div class="row">
          <div style="flex: 1;">
            <label for="name">Full Name</label>
            <input type="text" id="name" name="name" placeholder="Firstname Lastname" required>
          </div>
          <div style="flex: 1;">
            <label for="company">Company Name</label>
            <input type="text" id="company" name="company" placeholder="Company Name">
          </div>
        </div>
        <label>Date & Time</label>
        <div class="row">
          <input type="date" id="date" name="date" required>
          <input type="time" id="pickupTime" name="time" required>
        </div>
        <div id="returnFields" class="hidden">
          <label>Return Date & Time</label>
          <div class="row">
            <input type="date" id="returnDate" name="returnDate">
            <input type="time" id="returnTime" name="returnTime">
          </div>
        </div>
        <div id="airportFields" class="hidden">
          <h4>Airport pickup details:</h4>
          <p style="font-size: 10px; font-style: italic;">Flight Number will be tracked by your chauffeur inside the arrivals hall</p>
          <div class="row">
            <label for="flightNumber" style="flex: 1;">Flight Number</label>
            <label for="arrivalName" style="flex: 3;">Name for Pickup at Arrivals</label>
          </div>
          <div class="row">
            <input type="text" id="flightNumber" name="flightNumber" style="flex: 1;" placeholder="UA 956">
            <div class="button-group" style="flex: 3;" id="arrivalNameButtons">
              <button type="button" style="width: 25%;" onclick="selectArrivalName('Company Logo')">Company Logo</button>
              <button type="button" style="width: 25%;" onclick="selectArrivalName('My Name')">My Name</button>
              <button type="button" style="width: 25%;" class="selected" onclick="selectArrivalName('LimoJazz Logo')">LimoJazz Logo</button>
            </div>
            <input type="hidden" id="arrivalName" name="arrivalName" value="LimoJazz Logo">
          </div>
        </div>
        <div>
          <label>Number of Passengers</label>
          <div class="button-group" id="passengerButtons">
            <button type="button" onclick="selectPassengerCount(1)">1</button>
            <button type="button" onclick="selectPassengerCount(2)">2</button>
            <button type="button" onclick="selectPassengerCount(3)">3</button>
            <button type="button" onclick="selectPassengerCount(4)">4</button>
            <button type="button" onclick="selectPassengerCount(5)">5</button>
            <button type="button" onclick="selectPassengerCount(6)">6</button>
          </div>
        </div>
        <div>
          <label>Number of Large Suitcases</label>
          <div class="button-group" id="suitcaseButtons">
            <button type="button" onclick="selectSuitcaseCount(0)">0</button>
            <button type="button" onclick="selectSuitcaseCount(1)">1</button>
            <button type="button" onclick="selectSuitcaseCount(2)">2</button>
            <button type="button" onclick="selectSuitcaseCount(3)">3</button>
            <button type="button" onclick="selectSuitcaseCount(4)">4</button>
            <button type="button" onclick="selectSuitcaseCount(5)">5</button>
          </div>
        </div>
        <label for="message">Additional Information</label>
        <textarea id="message" name="message" rows="5" placeholder="I am traveling with a 3 yrs old. Do you have a child seat available?"></textarea>
        <div id="error-box-fieldCheck"></div>
        <div class="button-group">
          <button type="submit" onclick="generateWhatsAppLink(event)">Submit via WhatsApp</button>
          <button type="button" onclick="generateEmailMessage()">Submit via Email</button>
          <button type="resetForm" onclick="customResetAllExcept()">Reset Form</button>
        </div>
      </div>
    </form>
  </div>
  
  <!-- Service Worker Registration for PWA -->
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/service-worker.js')
        .then(function(registration) {
          console.log('Service Worker registered with scope:', registration.scope);
        })
        .catch(function(error) {
          console.error('Service Worker registration failed:', error);
        });
    }
	
	
  </script>
 <!-- JAVASCRIPT: Navbar, Mobile Menu, and Scroll Effects -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Mobile navbar menu toggle
      const mobileMenuBtn = document.getElementById('mobile-menu-btn');
      const navbarMenu = document.getElementById('navbar-menu');
      mobileMenuBtn.addEventListener('click', () => {
        navbarMenu.classList.toggle('active');
      });
      
      
      // Desktop scroll shrink effect & hide mobile menu on scroll
      function updateNavbar() {
        // Hide mobile menu when scrolling
        navbarMenu.classList.remove('active');
        if (window.innerWidth > 768) {
          if (window.scrollY > 50) {
            document.getElementById('navbar').classList.add('scrolled');
            document.getElementById('logo').classList.add('scrolled');
            document.getElementById('reserve-btn').style.display = 'inline-flex';
          } else {
            document.getElementById('navbar').classList.remove('scrolled');
            document.getElementById('logo').classList.remove('scrolled');
            document.getElementById('reserve-btn').style.display = 'none';
          }
        }
        if (window.scrollY > 50) {
          document.getElementById('reserve-btn').style.display = 'inline-flex';
        } else {
          document.getElementById('reserve-btn').style.display = 'none';
        }
      }
      window.addEventListener('scroll', updateNavbar);
      window.addEventListener('resize', updateNavbar);
    });
	
	


document.addEventListener('DOMContentLoaded', function() {
  const mobileMenuBtn = document.getElementById('mobile-menu-btn');
  const fullpageMenu = document.getElementById('fullpage-menu');
  const menuCloseBtn = document.getElementById('menu-close-btn');

  // Toggle menu with hamburger button
  mobileMenuBtn.addEventListener('click', function() {
    this.classList.toggle('open'); // animate the hamburger icon
    fullpageMenu.classList.toggle('active'); // show/hide the full-page menu
  });

  // Close menu with the X button
  menuCloseBtn.addEventListener('click', function() {
    fullpageMenu.classList.remove('active');
    mobileMenuBtn.classList.remove('open');
  });
});



  </script>
  
  
</body>
</html>
